<HTML>
<HEAD>
  <TITLE>JavsScript高级编程</TITLE>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <META NAME="Generator" CONTENT="EditPlus">
  <script type="text/javascript" src="jquery-1.3.2.min.js"></script>
  <script type="text/javascript" src="TreeGrid.js"></script>
  <link type="text/css" rel="stylesheet" href="TreeGrid.css"/>
</HEAD>

<BODY>
<input type="button" value="关闭所有节点" onclick="expandAll('N')">
<input type="button" value="展开所有节点" onclick="expandAll('Y')">
<input type="button" value="取得当前行的数据" onclick="selectedItem()"><br>
当前选中的行：<input type="text" id="currentRow" size="110">

<div id="div1"></div>

<script language="javascript">

  var dataObj = "";
  dataObj = eval('[{"children":[' +
    '{"children":null,"code":" m/rManager/toResourseManagerJsp","description":"权限管理-权限查询","iconCls":null,"id":4,"naming":"权限查询","pageLimit":null,"pageStart":null,"parentId":1,"permValue":"","permission":"权限查询","sortOrder":1,"state":"1","type":1}],"code":"m/rManager/toResourseManagerJsp","description":"资源管理菜单","iconCls":null,"id":1,"naming":"权限管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"/c/resource/getResourceTreeGird/**","permission":"资源管理","sortOrder":1,"state":"1","type":1' +
    '},{"children":[{"children":null,"code":"m/userManager/toUserManagerJsp","description":"用户管理-用户查询","iconCls":null,"id":8,"naming":"用户查询","pageLimit":null,"pageStart":null,"parentId":2,"permValue":"m/userManager/toUserManagerJsp","permission":"用户查询","sortOrder":1,"state":"1","type":1' +
    '}],"code":"YTUM.view.core.security.user.UserListPanel","description":"用户管理菜单","iconCls":null,"id":2,"naming":"用户管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"/c/uesr/uesrManager","permission":"用户管理","sortOrder":1,"state":"1","type":1},{"children":[{"children":null,"code":"m/roleManager/toRoleManagerJsp","description":"角色管理-角色查询","iconCls":null,"id":6,"naming":"角色查询","pageLimit":null,"pageStart":null,"parentId":3,"permValue":"m/roleManager/toRoleManagerJsp","permission":"角色管理-修改","sortOrder":1,"state":"1","type":1}],"code":"YTUM.view.core.security.role.RoleList","description":"角色管理菜单","iconCls":null,"id":3,"naming":"角色管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"/c/role/findAll/**","permission":"角色管理","sortOrder":1,"state":"1","type":1},{"children":[{"children":null,"code":"m/wageManage/index","description":"人事档案管理","iconCls":null,"id":14,"naming":"人事档案管理","pageLimit":null,"pageStart":null,"parentId":9,"permValue":"m/wageManage/index","permission":"人事档案管理","sortOrder":1,"state":"1","type":1}],"code":"m/wageManage/index","description":"工资表管理","iconCls":null,"id":9,"naming":"人事档案管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":null,"permission":"工资表管理","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/groupManage/toGroup","description":"职务管理","iconCls":null,"id":15,"naming":"职务管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"m/groupManage/toGroup","permission":"职务管理","sortOrder":1,"state":"1","type":1},{"children":[{"children":null,"code":"m/hrworkage/welfaremanagement","description":"福利管理","iconCls":null,"id":25,"naming":"福利管理","pageLimit":null,"pageStart":null,"parentId":16,"permValue":"m/hrworkage/welfaremanagement","permission":"福利管理","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/deptinsur/toIAManage","description":"社保、公积金管理","iconCls":null,"id":26,"naming":"社保、公积金管理","pageLimit":null,"pageStart":null,"parentId":16,"permValue":"m/deptinsur/toIAManage","permission":"社保、公积金管理","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/createSalary/toPageList","description":"创建工资","iconCls":null,"id":30,"naming":"创建工资","pageLimit":null,"pageStart":null,"parentId":16,"permValue":"m/createSalary/toPageList","permission":"创建工资","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/salaryApproval/toPageList","description":"工资审批","iconCls":null,"id":34,"naming":"工资审批","pageLimit":null,"pageStart":null,"parentId":16,"permValue":"m/salaryApproval/toPageList","permission":"工资审批","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/yearEndBonus/toPageList","description":"","iconCls":null,"id":36,"naming":"全年一次性奖金","pageLimit":null,"pageStart":null,"parentId":16,"permValue":"m/yearEndBonus/toPageList","permission":"全面一次性奖金","sortOrder":1,"state":"1","type":1}],"code":"YTUM.view.core.security.salary","description":"工资管理","iconCls":null,"id":16,"naming":"工资管理","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"/m/salary","permission":"工资管理","sortOrder":1,"state":"1","type":1},{"children":[{"children":null,"code":"m/insurParam/parametercsWeihu","description":"社保、公积金参数","iconCls":null,"id":17,"naming":"社保、公积金参数","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/insurparam","permission":"社保、公积金参数维护","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/taxrule/ratepaying","description":"一次性奖金","iconCls":null,"id":18,"naming":"一次性奖金纳税规则","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/taxrule/ratepaying","permission":"一次性奖金纳税规则","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/workageweal/flexiblebenefits","description":"司龄弹性福利","iconCls":null,"id":19,"naming":"弹性福利规则维护","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/workageweal/flexiblebenefits","permission":"弹性福利规则维护","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/insurlevel/toInsurLevel","description":"社保、公积金基数维护","iconCls":null,"id":20,"naming":"社保、公积金基数","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/insurlevel/toInsurLevel","permission":"社保、公积金基数维护","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/leaverule/toLeaverule","description":"病事假扣款规则","iconCls":null,"id":21,"naming":"病事假扣款规则","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/leaverule/toLeaverule","permission":"病事假扣款规则","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/companyUser/purviewsetting","description":"用户负责公司权限分配","iconCls":null,"id":24,"naming":"权限设置","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/companyUser/purviewsetting","permission":"权限设置","sortOrder":1,"state":"1","type":1},{"children":null,"code":"m/taxrule/ratepayingWH","description":"纳税规则维护","iconCls":null,"id":33,"naming":"纳税规则","pageLimit":null,"pageStart":null,"parentId":35,"permValue":"m/taxrule/ratepayingWH","permission":"纳税规则","sortOrder":1,"state":"1","type":1}],"code":"YTUM.view.core.security.salary.salaryParam","description":"工资所需参数维护","iconCls":null,"id":35,"naming":"参数维护","pageLimit":null,"pageStart":null,"parentId":0,"permValue":"/m/salary/salaryParam","permission":"参数维护","sortOrder":1,"state":"1","type":1}]');
  var config = {
    id: "tg1",
    width: "100%",
    renderTo: "auth_list",
    headerAlign: "left",
    headerHeight: "30",
    dataAlign: "left",
    indentation: "20",
    folderOpenIcon: "../js/TreeGrid/images/folderOpen.gif",
    folderCloseIcon: "../js/TreeGrid/images/folderClose.gif",
    defaultLeafIcon: "../js/TreeGrid/images/defaultLeaf.gif",
    hoverRowBackground: "true",
    folderColumnIndex: "1",
    itemClick: "itemClickEvent",

    columns: [
      {headerText: "状态", dataField: "state", headerAlign: "center", dataAlign: "center", width: "5%",},
      {headerText: "权限名称", dataField: "naming", headerAlign: "center", width: "15%"},
      {headerText: "权限代码", dataField: "code", headerAlign: "center", width: "25%"},
      {headerText: "访问地址", dataField: "permValue", headerAlign: "center", width: "30%"},
      {headerText: "备注", dataField: "description", headerAlign: "center", width: "25%"}

    ],
    data: [
      {
        state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: [
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []}
      ]
      },
      {
        state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: [
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []}
      ]
      },
      {
        state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: [
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []},
        {state: "启用", naming: "后台管理", code: "001", permValue: "001", description: "description", children: []}
      ]
      }
    ]

  };
  //创建一个组件对象
  var treeGrid = new TreeGrid(config);
  treeGrid.show();
  var tmepId;
  var tmepNaming;
  function itemClickEvent(id, index, data) {

    tmepId = data.id;
    tmepNaming = data.naming;

  }

  var flag;
  var tmepId;
  function expAll(trId) {

    treeGrid.showOrHidden(trId);

  };

  function expandAll(isOpen) {
    treeGrid.expandAll(isOpen);
  }


  /*
   展开、关闭所有节点。
   isOpen=Y表示展开，isOpen=N表示关闭
   */
  function expandAllId(isOpen) {

  }

</script>

</BODY>
</HTML>